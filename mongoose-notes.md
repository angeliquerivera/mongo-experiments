# Mongoose

## What is Mongoose?

- It is a library(module) that allows you model objects for MongoDB in JS

## What is a schema?

"Schema" refers to an organizational blueprint of how a DB and its collections are put together.

## What is `_id` on a Mongo document object?

- `_id` is the UNIQUE identifier that is generated by MongoDB at document creation time.

## What is `__v` on a Mongo document object?

- `__v` is MongoDB's internal document version tracker. It incre--ents whenever the specific document object(s) is/are updated.

## `mongoose.SchemaTypes.ObjectId`

- This field is a reference to another document's `ObjectId`.

- **In a MongoDB collection, not all document objects need to have all the same fields.**

- When it comes to document field errors, by defining the types in the schema, you can catch errors when a document field type doesn't match the defined schema.

- A `try-catch block` is what you use when you have asynchronous operations to attempt a certain operation and catch exceptions if they're thrown.
  - In the try-block, it'll try to do stuff. If the stuff in the try-block fails, the catch-block will return whatever error the try operation produced.

## Document Field Attribute Validation

### Transformations

- In addition to requiring fields, you can transform them based on their type.

```js
const someSchema = new mongoose.Schema({
  email: {
    type: String,
    required: true,
    lowercase: true, // emails are case insensitive
    // ANGE@HOLOLIVE.TV -> ange@hololive.tv
  },
});
```

### Defaults

- You can dictate default values if a field is not assigned at the time of document creation.

```js
{
  createdAt: {
    type: Date,
    default: () => Date.now(), // runs if this value is not assigned at creation time
  },
}
```

### Immutability

- "Immutable" means unable to be changed. Once the value exists, it's permanent; it can never be changed. It takes the key `immutable` and it accepts the boolean `true`.

### Minimums and Maximums

#### Numbers

### Custom Validation

- Custom validators are objects that contain a `validator` key-function pair and a `message` key-string pair.
